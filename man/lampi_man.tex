%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Project:     Los Alamos Message Passing Interface (LA-MPI)
%% Descr:       A reliable, resilient message passing library
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[english]{article}
\usepackage[latin1]{inputenc}
\usepackage{babel}

%% do we have the `fancyhdr' package?
\IfFileExists{fancyhdr.sty}{
\usepackage[fancyhdr,pdf]{latex2man}
}{
%% do we have the `fancyheadings' package?
\IfFileExists{fancyheadings.sty}{
\usepackage[fancy,pdf]{latex2man}
}{
\usepackage[nofancy,pdf]{latex2man}
\message{no fancyhdr or fancyheadings package present, discard it}
}}

\setDate{\today}    %%%% must be manually set, if rcsinfo is not present
\message{package rcsinfo not present, discard it}

\setVersionWord{Version:}  %%% that's the default, no need to set it.
\setVersion{1.5.13}

\begin{document}

\begin{Name}{1}{mpirun}{Resilient Technologies Team, CCS-1, LANL}{LA-MPI -- Los Alamos MPI}{Los Alamos Message-Passing Interface}

  \Prog{mpirun} - run MPI programs using the Los Alamos Message-Passing Interface, LA-MPI.
\end{Name}

\section{Synopsis}
%%%%%%%%%%%%%%%%%%

\Prog{mpirun} [\Opt{-n}\Bar\Opt{-np} \Arg{#,...}] \oOptArg{-N}{ #}
\oOptArg{-H}{ hostlist} [...] \Arg{prog} [\Arg{args ...}]

\Prog{mpirun} -h\Bar-help

\Prog{mpirun} -version

\section{Description}
%%%%%%%%%%%%%%%%%%%%%
\Prog{mpirun} starts an MPI application compiled and linked against the
LA-MPI implementation of MPI.

LA-MPI is a network-fault-tolerant message-passing system designed for
the challenges of the terascale cluster environment.

\section{Options}
%%%%%%%%%%%%%%%%%
\begin{Description}\setlength{\itemsep}{0cm}
\item[\Opt{-n}\Bar\Opt{-np} \Arg{ number of processes}] A single value
  specifies the total number of processes, while a comma-delimited
  list of numbers specifies the number of processes on each host or
  machine.
\item[\OptArg{-N}{ number of hosts}] The number of hosts to use.
\item[\OptArg{-H}{ hostlist}] A comma-delimited list of name(s) of
  hosts to use.
\item[\Opt{-threads}] Turn on thread safe code.
\item[\Opt{-t}] Turn on tagging of standard output and error lines
  with either GR[HR.LR.HN] (GR = global rank, HR = host rank, LR =
  local rank, HN = host name), or simply HR (on RMS/prun systems).
\item[\OptArg{-dev}{ netpaths}] A colon-delimited list of one or more
  network paths to use for this MPI job. Currently the choices are
  some combination of \Arg{tcp} (TCP/IP), \Arg{udp} (UDP/IP), \Arg{gm}
  (Myrinet/GM), \Arg{quadrics} (QsNet/Elan3) and \Arg{ib} (InfiniBand),
  depending on your installation.
\item[\Opt{-crc}] Use 32-bit CRCs instead of 32-bit additive checksums
  (the LA-MPI default) for application to application data integrity
  where applicable.
\item[\OptArg{-qf,-mf,-ib}{ flaglist}] A comma-delimited list of
  keywords that affect operation on, respectively Quadrics,
  Myrinet(GM) and InfiniBand networks. The keywords that are supported
  are "noack", "ack", "nochecksum", and "checksum". "noack" disables
  retransmission of data, but allows data sends to complete upon local
  notification by the network adapter. "nochecksum" disables
  all LA-MPI CRC/checksum generation and verification; in this mode,
  data integrity guarantees are provided only at the network adapter
  level. The defaults are "ack", and "checksum" for a LA-MPI library
  built with reliability mode enabled.
\end{Description}

For a complete list of options available with your installation, type
\Prog{mpirun -help}.

\section{Arguments}
%%%%%%%%%%%%%%%%%%%
The \Arg{executable} must be either a single executable or a
comma-delimited list of executables for each host or machine (which is
not supported for all environments). Executable arguments apply to all
specified executables.

\section{Examples}
%%%%%%%%%%%%%%%%%%
\begin{enumerate}\setlength{\itemsep}{2cm}
\item[1. \Prog{mpirun prog args}] On systems where LSF, this
  command can be used to start \Prog{prog args} on some number of
  hosts and processors preassigned by LSF.  Note: In some
  installations LA-MPI does not interact directly with LSF, so that a
  \Prog{-np NPROCS} option may be required.
\item[2. \Prog{mpirun -n 64 prog args}] On systems with LSF, this
  command will start 64 processes of \Prog{prog args} on either all
  or some subset of preassigned hosts and processors. If it is a
  subset, then mpirun attempts to use all of the preassigned
  processors on a host before allocating from the next reserved host's
  allocation. On systems with rsh spawning only, this command will
  start 64 processes on the local host or machine.
\item[3. \Prog{mpirun -n 64 -N 40 prog args}] On systems with
  standard LSF, this command will start 64 processes on 40 preassigned
  hosts as explained in example #2. On systems with LSF/RMS, mpirun
  will start 64 processes on 40 hosts using \Cmd{prun}{1} in a block
  assignment mode. This command will not work on systems with rsh
  spawning only, as there is no specific host information available.
\item[4. \Prog{mpirun -n 66 -H n1,n2,n3,n4 prog args}] This
  command will start 66 processes on the 4 named hosts.  If the system
  supports LSF, then the assignment will be made using the processors
  available on each host. If the system only support rsh spawning,
  then mpirun will assign as close as possible the same number of
  processes per host (in this example, 17 processes will be started on
  n1 and n2, and 16 on n3 and n4).
\item[5. \Prog{mpirun -dev tcp -t -np 2,10,30,22 -h n1,n2,n3,n4 prog args}]
  On systems with rsh spawning, this command will
  start 2 processes on n1, 10 on n2, 30 on n3, and 22 on n4. Prefix
  tagging of standard output and standard error will be done, and only
  TCP/IP will be used for intercommunication between hosts (if
  available).
\end{enumerate}

\section{Files}
%%%%%%%%%%%%%%%
\begin{Description}\setlength{\itemsep}{0cm}
\item[\File{mpirun}] Job spawner using LA-MPI.
\item[\File{libmpi.so}] LA-MPI shared-object library.
\item[\File{mpi.h}] LA-MPI main C header file.
\item[\File{mpif.h}] LA-MPI main Fortran header file.
\item[\File{\$MPI\_ROOT/etc/lampi.conf}] System LA-MPI configuration file.
\item[\File{\$HOME/.lampi.conf}] User LA-MPI configuration file.

Instead of using command-line options to mpirun, administrators and
users can also set the default behavior of \Prog{mpirun} by defining
variables in the system and user configuration files,
\File{\$MPI\_ROOT/lampi.conf} and \File{\$HOME/.lampi.conf}
file.

For example, the configuration file

\begin{verbatim}
Quiet 1
OutputPrefix 1
MyrinetFlags noack,nochecksum
\end{verbatim}

is equivalent to setting \Prog{mpirun -q -t -mf noack,nochecksum}.

The list of available configuration file variables can be
obtained from \Prog{mpirun -help}.

\end{Description}

\section{Diagnostics}
%%%%%%%%%%%%%%%%%%%%%

On error, LA-MPI attempts to provide detailed diagnostic messages
which are written both to standard error and the file \File{lampi.log}
in the application's working directory.  Occasionally, if a job dies
unexpectedly, diagnostic error messages may not be delivered to
stderr, but are likely to be successfully written to \File{lampi.log}.

Additional warning messages can be enabled with \Prog{mpirun -w}.
Extremely verbose runtime information can be generated with
\Prog{mpirun -verbose}, which should generally be avoided, but may be
useful for checking the sanity of an installation.

On systems that support job spawning via \Prog{rsh} or \Prog{ssh},
make sure that your shell startup environment (e.g., .cshrc, .bashrc
etc.) correctly set the PATH and LD\_LIBRARY\_PATH environment
variables.

\section{Future development}
%%%%%%%%%%%%%%%%%%%%%%%%
The LA-MPI project has now merged with Open MPI
(\Email{http://www.open-mpi.org}).  The first release of Open MPI is
scheduled for mid 2005.

LA-MPI will continue to be maintained until Open MPI has sufficiently
matured for production use on terascale platforms.

\section{Version}
%%%%%%%%%%%%%%%%%
Version: \Version\ of \Date.

\section{Bugs}
%%%%%%%%%%%%%%%%%%%%%%%%
Please report bugs to \Email{lampi-support@lanl.gov}.

\section{License}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Copyright 2002-2004.  The Regents of the University of
California. This material was produced under U.S. Government contract
W-7405-ENG-36 for Los Alamos National Laboratory, which is operated by
the University of California for the U.S. Department of Energy. The
Government is granted for itself and others acting on its behalf a
paid-up, nonexclusive, irrevocable worldwide license in this material
to reproduce, prepare derivative works, and perform publicly and
display publicly. Beginning five (5) years after October 10,2002
subject to additional five-year worldwide renewals, the Government is
granted for itself and others acting on its behalf a paid-up,
nonexclusive, irrevocable worldwide license in this material to
reproduce, prepare derivative works, distribute copies to the public,
perform publicly and display publicly, and to permit others to do
so. NEITHER THE UNITED STATES NOR THE UNITED STATES DEPARTMENT OF
ENERGY, NOR THE UNIVERSITY OF CALIFORNIA, NOR ANY OF THEIR EMPLOYEES,
MAKES ANY WARRANTY, EXPRESS OR IMPLIED, OR ASSUMES ANY LEGAL LIABILITY
OR RESPONSIBILITY FOR THE ACCURACY, COMPLETENESS, OR USEFULNESS OF ANY
INFORMATION, APPARATUS, PRODUCT, OR PROCESS DISCLOSED, OR REPRESENTS
THAT ITS USE WOULD NOT INFRINGE PRIVATELY OWNED RIGHTS.

Additionally, this program is free software; you can distribute it
and/or modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either version 2
of the License, or any later version.  Accordingly, this program is
distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public
License for more details.

LA-MPI has been approved for release with associated LA-CC Number
LA-CC-02-41.

\section{Authors}
%%%%%%%%%%%%%%%%
\noindent
Rob T. Aulwes, \\
Laura Casswell, \\
David J. Daniel, \\
Denis G. Dimick, \\
Nehal N. Desai, \\
Richard L. Graham, \\
L. Dean Risinger, \\
Mitchel W. Sukalski, \\
Timothy S. Woodall, \\
Ginger A. Young

\Email{lampi-support@lanl.gov}

\LatexManEnd

\end{document}
