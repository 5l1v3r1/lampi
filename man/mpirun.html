<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- Manual page created with latex2man on Wed Aug 24 14:50:37 MDT 2005 --
-- Author of latex2man: Juergen.Vollmer@acm.org --
-- NOTE: This file is generated, DO NOT EDIT. -->
<html>
<head><title>LA-MPI</title></head>
<body bgcolor="white">
<h1 align=center>
Los Alamos Message-Passing Interface 
</h1>
<h4 align=center>Resilient Technologies Team, CCS-1, LANL </h4>
<h4 align=center>24 August 2005</h4>
<h4 align=center>Version 1.5.13</h4>
<p>
<tt>mpirun</tt>
- run MPI programs using the Los Alamos Message-Passing Interface, LA-MPI. 
<h3>Table of Contents</h3>
<ul>
<li><a href="#section_1">Synopsis </a></li>
<li><a href="#section_2">Description </a></li>
<li><a href="#section_3">Arguments </a></li>
<li><a href="#section_4">Common options </a></li>
<li><a href="#section_5">Other options </a></li>
<li><a href="#section_6">Examples </a></li>
<li><a href="#section_7">Files </a></li>
<li><a href="#section_8">Diagnostics </a></li>
<li><a href="#section_9">Future development </a></li>
<li><a href="#section_10">Version </a></li>
<li><a href="#section_11">Bugs </a></li>
<li><a href="#section_12">License </a></li>
<li><a href="#section_13">Authors </a>
</li></ul>
<p>
<h2><a name="section_1">Synopsis</a></h2>

<p>
<tt>mpirun</tt>
[<b>-n</b>|<b>-np</b>
<i>#,...</i>]
<b>-N</b><i> #</i>
<b>-H</b><i> hostlist</i>
[...] <i>prog</i>
[<i>args ...</i>]
<p>
<tt>mpirun</tt>
-h|-help
<p>
<tt>mpirun</tt>
-version 
<p>
<h2><a name="section_2">Description</a></h2>

<tt>mpirun</tt>
starts an MPI application compiled and linked against the 
LA-MPI implementation of MPI. 
<p>
LA-MPI is a network-fault-tolerant message-passing system designed for 
the challenges of the terascale cluster environment. 
<p>
Command-line options may start with one or more dashes. Options 
may also be specied in a configuration file (<tt>$HOME/.lampi.conf</tt>)
using the associated variable (see "Advanced options" below). 
<p>
<h2><a name="section_3">Arguments</a></h2>

<i>prog</i>
must be either a single executable or a 
comma-delimited list of executables for each host or machine (which is 
not supported for all environments). Executable arguments apply to all 
specified executables. 
<p>
<h2><a name="section_4">Common options</a></h2>

<dl compact>
<dt><b>-h, -help</b>
<dd> 
Print help and exit. 
</dd>
<dt><b>-n</b>|<b>-np</b> <i> number of processes</i>
<dd> A single value 
specifies the total number of processes, while a comma-delimited 
list of numbers specifies the number of processes on each host or 
machine. 
</dd>
<dt><b>-N</b><i> number of hosts</i>
<dd> The number of hosts to use. 
</dd>
<dt><b>-H</b><i> hostlist</i>
<dd> A comma-delimited list of name(s) of 
hosts to use. 
</dd>
<dt><b>-t,-p</b>
<dd> Turn on tagging of standard output and error lines 
with either GR[HR.LR.HN] (GR = global rank, HR = host rank, LR = 
local rank, HN = host name), or simply HR (on RMS/prun systems). 
</dd>
<dt><b>-v</b>
<dd> Turn on verbose debugging information. 
</dd>
<dt><b>-V, -version</b>
<dd> 
Print version and exit. 
</dd>
<dt><b>-local</b>
<dd> 
Run on the local host using fork/exec to spawn the processes. 
</dd>
<dt><b>-threads</b>
<dd> Turn on thread safe code. 
</dd>
<dt><b>-crc</b>
<dd> Use 32-bit CRCs instead of 32-bit additive checksums 
(the LA-MPI default) for application to application data integrity 
where applicable. 
</dd>
<dt><b>-qf,-mf,-ib</b><i> flaglist</i>
<dd> A comma-delimited list of 
keywords that affect operation on, respectively Quadrics, 
Myrinet(GM) and InfiniBand networks. The keywords that are supported 
are "noack", "ack", "nochecksum", and "checksum". "noack" disables 
retransmission of data, but allows data sends to complete upon local 
notification by the network adapter. "nochecksum" disables 
all LA-MPI CRC/checksum generation and verification; in this mode, 
data integrity guarantees are provided only at the network adapter 
level. The defaults are "ack", and "checksum" for a LA-MPI library 
built with reliability mode enabled. 
</dd>
</dl>
<p>
<h2><a name="section_5">Other options</a></h2>

<dl compact>
<dt><b>-N,-nhosts</b><i> ARG,...</i>
<dd> 
Number of hosts (machines) <br>
 
Configuration file variable: <b>HostCount</b>
</dd>
<dt><b>-H, -hostlist</b><i> ARG,...</i>
<dd> 
List of hosts (machines) <br>
 
Configuration file variable: <b>HostList</b>
</dd>
<dt><b>-machinefile</b><i> ARG,...</i>
<dd> 
File containing list of hosts (machines) <br>
 
Configuration file variable: <b>MachineFile</b>
</dd>
<dt><b>-n, -np, -nprocs</b><i> ARG,...</i>
<dd> 
Number of processes total or on each host (machine) <br>
 
Configuration file variable: <b>Procs</b>
</dd>
<dt><b>-f, -no-arg-check</b>
<dd> 
No checking of MPI arguments <br>
 
Configuration file variable: <b>NoArgCheck</b>
</dd>
<dt><b>-t, -p, -output-prefix</b>
<dd> 
Prefix standard output and error with helpful information <br>
 
Configuration file variable: <b>OutputPrefix</b>
</dd>
<dt><b>-q, -quiet</b>
<dd> 
Suppress start-up messages <br>
 
Configuration file variable: <b>Quiet</b>
</dd>
<dt><b>-v, -verbose</b>
<dd> 
Extremely verbose progress information <br>
 
Configuration file variable: <b>Verbose</b>
</dd>
<dt><b>-w, -warn</b>
<dd> 
Enable warning messages <br>
 
Configuration file variable: <b>Warn</b>
</dd>
<dt><b>-i, -interface</b><i> ARG,...</i>
<dd> 
List of interface names to be used by TCP/UDP paths <br>
 
Configuration file variable: <b>InterfaceList</b>
</dd>
<dt><b>-ni, -interfaces</b><i> ARG,...</i>
<dd> 
Maximum number of interfaces to be used by TCP/UDP paths <br>
 
Configuration file variable: <b>Interfaces</b>
</dd>
<dt><b>-s, -mpirun-hostname</b><i> ARG,...</i>
<dd> 
A comma-delimited list of preferred IP interface name 
fragments (whole, suffix, or prefix) or addresses for TCP/IP 
administrative and UDP/IP data traffic. <br>
 
Configuration file variable: <b>MpirunHostname</b>
</dd>
<dt><b>-nolsf</b>
<dd> 
No LSF control will be used in job <br>
 
Configuration file variable: <b>NoLSF</b>
</dd>
<dt><b>-cpulist</b><i> ARG,...</i>
<dd> 
Which CPUs to use (when available)<br>
 
Configuration file variable: <b>CpuList</b>
</dd>
<dt><b>-d, -working-dir</b><i> ARG,...</i>
<dd> 
Current directory <br>
 
Configuration file variable: <b>WorkingDir</b>
</dd>
<dt><b>-rusage</b>
<dd> 
Print resource usage (when available) <br>
 
Configuration file variable: <b>PrintRusage</b>
</dd>
<dt><b>-dapp</b><i> ARG,...</i>
<dd> 
Absolute path to binary <br>
 
Configuration file variable: <b>DirectoryOfBinary</b>
</dd>
<dt><b>-e, -exe</b><i> ARG,...</i>
<dd> 
Binary name <br>
 
Configuration file variable: <b>Executable</b>
</dd>
<dt><b>-dev</b><i> ARG,...</i>
<dd> 
Type of network. A colon-delimited list of one or more network 
paths to use for this MPI job. Currently the choices are some 
combination of <i>tcp</i>
(TCP/IP), <i>udp</i>
(UDP/IP), <i>gm</i>
(Myrinet/GM), <i>quadrics</i>
(QsNet/Elan3) and <i>ib</i>
(InfiniBand), depending on your installation. <br>
 
Configuration file variable: <b>NetworkDevices</b>
</dd>
<dt><b>-debug-daemon</b>
<dd> 
Wait in LA-MPI daemon for debugger to attach (when applicable) <br>
 
Configuration file variable: <b>DebugDaemon</b>
</dd>
<dt><b>-env</b><i> ARG,...</i>
<dd> 
List environment variables and settings <br>
 
Configuration file variable: <b>EnvVars</b>
</dd>
<dt><b>-retry</b><i> ARG,...</i>
<dd> 
Number of times to retry for resources <br>
 
Configuration file variable: <b>MaxRetryWhenNoResource</b>
</dd>
<dt><b>-local</b>
<dd> 
Run on the local host using fork/exec to spawn the processes <br>
 
Configuration file variable: <b>Local</b>
</dd>
<dt><b>-ssh</b>
<dd> 
use SSH instead of RSH to create remote processes <br>
 
Configuration file variable: <b>UseSSH</b>
</dd>
<dt><b>-threads</b>
<dd> 
Threads used in job <br>
 
Configuration file variable: <b>NoThreads</b>
</dd>
<dt><b>-timeout</b><i> ARG,...</i>
<dd> 
Time in seconds to wait for client applications to connect back <br>
 
Configuration file variable: <b>ConnectTimeout</b>
</dd>
<dt><b>-heartbeat-period</b><i> ARG,...</i>
<dd> 
Period in seconds of heartbeats between mpirun and daemon processes <br>
 
Configuration file variable: <b>HeartbeatPeriod</b>
</dd>
<dt><b>-crc</b>
<dd> 
Use CRCs instead of checksums <br>
 
Configuration file variable: <b>UseCRC</b>
</dd>
<dt><b>-list-options</b>
<dd> 
Print detailed list of all options and exit <br>
 
Configuration file variable: <b>ListOptions</b>
</dd>
</dl>
<p>
<h2><a name="section_6">Examples</a></h2>

<ol compact>
<dt>1. <tt>mpirun prog args</tt>
<dd> On systems where LSF, this 
command can be used to start <tt>prog args</tt>
on some number of 
hosts and processors preassigned by LSF. Note: In some 
installations LA-MPI does not interact directly with LSF, so that a 
<tt>-np NPROCS</tt>
option may be required. 
</dd>
<dt>2. <tt>mpirun -n 64 prog args</tt>
<dd> On systems with LSF, this 
command will start 64 processes of <tt>prog args</tt>
on either all 
or some subset of preassigned hosts and processors. If it is a 
subset, then mpirun attempts to use all of the preassigned 
processors on a host before allocating from the next reserved host's 
allocation. On systems with rsh spawning only, this command will 
start 64 processes on the local host or machine. 
</dd>
<dt>3. <tt>mpirun -n 64 -N 40 prog args</tt>
<dd> On systems with 
standard LSF, this command will start 64 processes on 40 preassigned 
hosts as explained in example #2. On systems with LSF/RMS, mpirun 
will start 64 processes on 40 hosts using <em>prun</em>(1)
in a block 
assignment mode. This command will not work on systems with rsh 
spawning only, as there is no specific host information available. 
</dd>
<dt>4. <tt>mpirun -n 66 -H n1,n2,n3,n4 prog args</tt>
<dd> This 
command will start 66 processes on the 4 named hosts. If the system 
supports LSF, then the assignment will be made using the processors 
available on each host. If the system only support rsh spawning, 
then mpirun will assign as close as possible the same number of 
processes per host (in this example, 17 processes will be started on 
n1 and n2, and 16 on n3 and n4). 
</dd>
<dt>5. <tt>mpirun -dev tcp -t -np 2,10,30,22 -h n1,n2,n3,n4 prog args</tt>
<dd> 
On systems with rsh spawning, this command will 
start 2 processes on n1, 10 on n2, 30 on n3, and 22 on n4. Prefix 
tagging of standard output and standard error will be done, and only 
TCP/IP will be used for intercommunication between hosts (if 
available). 
</li>
</ol>
<p>
<h2><a name="section_7">Files</a></h2>

<dl compact>
<dt><tt>mpirun</tt>
<dd> Job spawner using LA-MPI. 
</dd>
<dt><tt>libmpi.so</tt>
<dd> LA-MPI shared-object library. 
</dd>
<dt><tt>mpi.h</tt>
<dd> LA-MPI main C header file. 
</dd>
<dt><tt>mpif.h</tt>
<dd> LA-MPI main Fortran header file. 
</dd>
<dt><tt>$MPI_ROOT/etc/lampi.conf</tt>
<dd> System LA-MPI configuration file. 
</dd>
<dt><tt>$HOME/.lampi.conf</tt>
<dd> User LA-MPI configuration file. 
<p>
Instead of using command-line options to mpirun, administrators and 
users can also set the default behavior of <tt>mpirun</tt>
by defining 
variables in the system and user configuration files, 
<tt>$MPI_ROOT/lampi.conf</tt>
and <tt>$HOME/.lampi.conf</tt>
file. 
<p>
For example, the configuration file 
<p>
<pre>
Quiet 1
OutputPrefix 1
MyrinetFlags noack,nochecksum
</pre>
<p>
is equivalent to setting <tt>mpirun -q -t -mf noack,nochecksum</tt>.
<p>
The list of available configuration file variables can be 
obtained from <tt>mpirun -help</tt>.
<p>
</dd>
</dl>
<p>
<h2><a name="section_8">Diagnostics</a></h2>

<p>
On error, LA-MPI attempts to provide detailed diagnostic messages 
which are written both to standard error and the file <tt>lampi.log</tt>
in the application's working directory. Occasionally, if a job dies 
unexpectedly, diagnostic error messages may not be delivered to 
stderr, but are likely to be successfully written to <tt>lampi.log</tt>.
<p>
Additional warning messages can be enabled with <tt>mpirun -w</tt>.
Extremely verbose runtime information can be generated with 
<tt>mpirun -verbose</tt>,
which should generally be avoided, but may be 
useful for checking the sanity of an installation. 
<p>
On systems that support job spawning via <tt>rsh</tt>
or <tt>ssh</tt>,
make sure that your shell startup environment (e.g., .cshrc, .bashrc 
etc.) correctly set the PATH and LD_LIBRARY_PATH environment 
variables. 
<p>
<h2><a name="section_9">Future development</a></h2>

The LA-MPI project has now merged with Open MPI 
(<a href ="http://www.open-mpi.org"><tt>http://www.open-mpi.org</tt></a>).
The first release of Open MPI is 
scheduled for mid 2005. 
<p>
LA-MPI will continue to be maintained until Open MPI has sufficiently 
matured for production use on terascale platforms. 
<p>
<h2><a name="section_10">Version</a></h2>

Version: 1.5.13 of 24 August 2005.
<p>
<h2><a name="section_11">Bugs</a></h2>

Please report bugs to <a href ="mailto:lampi-support@lanl.gov"><tt>lampi-support@lanl.gov</tt></a>.
<p>
<h2><a name="section_12">License</a></h2>

<p>
Copyright 2002-2005. The Regents of the University of 
California. This material was produced under U.S. Government contract 
W-7405-ENG-36 for Los Alamos National Laboratory, which is operated by 
the University of California for the U.S. Department of Energy. The 
Government is granted for itself and others acting on its behalf a 
paid-up, nonexclusive, irrevocable worldwide license in this material 
to reproduce, prepare derivative works, and perform publicly and 
display publicly. Beginning five (5) years after October 10,2002 
subject to additional five-year worldwide renewals, the Government is 
granted for itself and others acting on its behalf a paid-up, 
nonexclusive, irrevocable worldwide license in this material to 
reproduce, prepare derivative works, distribute copies to the public, 
perform publicly and display publicly, and to permit others to do 
so. NEITHER THE UNITED STATES NOR THE UNITED STATES DEPARTMENT OF 
ENERGY, NOR THE UNIVERSITY OF CALIFORNIA, NOR ANY OF THEIR EMPLOYEES, 
MAKES ANY WARRANTY, EXPRESS OR IMPLIED, OR ASSUMES ANY LEGAL LIABILITY 
OR RESPONSIBILITY FOR THE ACCURACY, COMPLETENESS, OR USEFULNESS OF ANY 
INFORMATION, APPARATUS, PRODUCT, OR PROCESS DISCLOSED, OR REPRESENTS 
THAT ITS USE WOULD NOT INFRINGE PRIVATELY OWNED RIGHTS. 
<p>
Additionally, this program is free software; you can distribute it 
and/or modify it under the terms of the GNU Lesser General Public 
License as published by the Free Software Foundation; either version 2 
of the License, or any later version. Accordingly, this program is 
distributed in the hope that it will be useful, but WITHOUT ANY 
WARRANTY; without even the implied warranty of MERCHANTABILITY or 
FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public 
License for more details. 
<p>
LA-MPI has been approved for release with associated LA-CC Number 
LA-CC-02-41. 
<p>
<h2><a name="section_13">Authors</a></h2>

Rob T. Aulwes, <br>
 
Laura Casswell, <br>
 
David J. Daniel, <br>
 
Denis G. Dimick, <br>
 
Nehal N. Desai, <br>
 
Richard L. Graham, <br>
 
L. Dean Risinger, <br>
 
Mitchel W. Sukalski, <br>
 
Timothy S. Woodall, <br>
 
Ginger A. Young 
<p>
<a href ="mailto:lampi-support@lanl.gov"><tt>lampi-support@lanl.gov</tt></a>
<p>
</body>
</html>
<!-- NOTE: This file is generated, DO NOT EDIT. -->
